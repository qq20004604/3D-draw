# 题目

设计一个页面，利用控件显示3个维度（x,y,z）数据图。

三个要求：

* 可对该图进行旋转、缩放等可视操作；
* 绘制三维散点图；
* 输入公式，绘制 3d 曲面图


## 题目分析

#### 问题1：3D图

两种方案

第一种是自己写引擎，可以利用 canvas 或者 css3 来实现，但考虑到散点可能会比较多，因此选用canvas比较合适。缺点是自己写开发的工作量会比较大。


第二种方案是使用已有的库来实现，比如 

echarts：示例 https://www.echartsjs.com/examples/zh/editor.html?c=line3d-orthographic&gl=1

优点是现成的，二次开发成本低，缺点是限死只能画三维数据图，若想要扩展更多功能难。

three.js：示例 https://threejs.org/examples/#webgl_interactive_raycasting_points

优点是功能强大，二次开发容易，可以绘制各种东西，还可以从例如3D-Max等软件里，直接导入3D图形。缺点是如果单纯熬绘图的话，需要做很多额外工作，比如坐标轴之类的需要自己绘制。


**分析结论：**

第一种方案过于浪费时间，所以pass。

第二种方案的 echarts 只能支持普通的点显示，对三维曲面图支持并不好，也不方便后期功能扩展，而且也有偷懒嫌疑，所以 pass

这里选择采用基于 three.js 进行开发。


##### 1.1、技术设计

底层采用 three.js，在其基础上进行二次封装。

封装类 ``class ThreeDManager``，写在 ThreeDManager.js 这个文件里。

类添加内置方法，包括：

* 绘制三维坐标轴；
* 给三维坐标轴上添加坐标文字；
* 自动更新场景；
* 清空场景；
* 绘制点；
* 绘制线条；
* 批量绘制点；
* 根据传入的三维坐标数据，自动取最大值，用于创建坐标轴；

#### 1.2、功能开发

基于业务需求的代码为了方便写在 html 文件里。

一共有四个功能：

* clearCanvas：清空场景
* drawAxis：单纯只画一个坐标轴，坐标轴每个单位1，三个方向各10格
* drawPoints：三维散点数据显示（随机生成了100个点，可以根据需求，改变点颜色和大小）；
* drawFormula：根据公式绘3D曲面。公式在 ``getZ()`` 这个函数里可以自行配置；

其中绘制离散点和绘制 3D 曲面，都支持例如颜色、显示范围、格子大小等属性的配置，具体可以参照代码和注释。


#### 1.3、目前不足

由于时间所限，例如 图形 根据光源影响而显示不同的颜色，负坐标轴的显示，后续如果有需要的话，则会添加。

#### 1.4、DEMO地址

http://lovelovewall.com/test/3d_axis.html
